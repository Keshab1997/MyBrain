<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyBrain Dashboard</title>
    
    <!-- CSS à¦²à¦¿à¦‚à¦• -->
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/style-dash.css">
    <link rel="stylesheet" href="css/footer.css">
    
</head>
<body>

<!-- à¦¨à§à¦¯à¦¾à¦­à¦¿à¦—à§‡à¦¶à¦¨ à¦¬à¦¾à¦° -->
<nav class="navbar">
    <div class="logo-section">
        <span class="logo-icon">ðŸ§ </span>
        <span class="logo-text">MyBrain</span>
    </div>
    
    <div class="nav-right">
        <div class="nav-links">
            <a href="#" class="nav-item active">Notes</a>
            <a href="vault.html" class="nav-item">Vault</a>
        </div>
        <button id="logout-btn" class="btn-logout">
            <img src="https://img.icons8.com/ios-glyphs/30/fa314a/exit.png" alt="Logout" style="width:16px; margin-right:5px;">
            Logout
        </button>
    </div>
</nav>

    <div class="container">
        <!-- à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦² à¦¸à§‡à¦•à¦¶à¦¨ (JS à¦¦à¦¿à§Ÿà§‡ à¦²à§‹à¦¡ à¦¹à¦¬à§‡) -->
        <div id="profile-widget-area"></div>
        
        <!-- à§§. à¦¸à¦¾à¦°à§à¦š à¦¬à¦¾à¦° -->
        <div class="search-wrapper">
            <input type="text" id="searchInput" placeholder="ðŸ” Search notes, links or ideas...">
        </div>

        <!-- à§¨. à¦‡à¦¨à¦ªà§à¦Ÿ à¦à¦°à¦¿à§Ÿà¦¾ (à¦²à¦¿à¦‚à¦• à¦à¦–à¦¾à¦¨à§‡ à¦†à¦¸à¦¬à§‡) -->
        <div class="input-area">
            <textarea id="noteInput" placeholder="Save a note, link or idea..."></textarea>
            
            <div class="input-actions">
                <input type="file" id="fileInput" hidden>
                
                <button id="saveBtn" class="btn btn-primary">Save to Brain</button>
            </div>
            <p id="uploadStatus" style="display:none; color: green; font-size: 12px; margin-top:5px;">Uploading...</p>
        </div>

        <!-- à§©. à¦¨à§‹à¦Ÿà¦¸ à¦•à¦¨à§à¦Ÿà§‡à¦¨à§à¦Ÿ à¦à¦°à¦¿à§Ÿà¦¾ -->
        <div id="content-grid" class="masonry-grid">
            <p style="text-align:center; color:#999; width:100%;">Loading your brain...</p>
        </div>

    </div>

    <!-- à¦«à§à¦Ÿà¦¾à¦° -->
    <div id="app-footer"></div>

    <!-- à¦ªà§à¦°à§Ÿà§‹à¦œà¦¨à§€à§Ÿ à¦¸à§à¦•à§à¦°à¦¿à¦ªà§à¦Ÿà¦¸ -->
    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/dashboard.js"></script>
    <script type="module" src="js/profile-manager.js"></script>
    <script src="js/search.js"></script> 
    <script src="js/footer.js"></script>

        <!-- à¦¶à§‡à§Ÿà¦¾à¦° à¦•à¦°à¦¾ à¦²à¦¿à¦‚à¦• à¦¹à§à¦¯à¦¾à¦¨à§à¦¡à§‡à¦² à¦•à¦°à¦¾à¦° à¦¸à§à¦•à§à¦°à¦¿à¦ªà§à¦Ÿ (à¦†à¦ªà¦¡à§‡à¦Ÿà§‡à¦¡) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const noteInput = document.getElementById('noteInput');
            if (!noteInput) return;

            // à§§. URL à¦¥à§‡à¦•à§‡ à¦²à¦¿à¦‚à¦• à¦¨à§‡à¦“à§Ÿà¦¾
            const urlParams = new URLSearchParams(window.location.search);
            let sharedNote = urlParams.get('note');

            // à§¨. SessionStorage à¦¥à§‡à¦•à§‡ à¦¨à§‡à¦“à§Ÿà¦¾
            if (!sharedNote) {
                sharedNote = sessionStorage.getItem('pendingNote');
                if (sharedNote) sessionStorage.removeItem('pendingNote');
            }

            // à§©. à¦²à¦¿à¦‚à¦• à¦ªà¦¾à¦“à§Ÿà¦¾ à¦—à§‡à¦²à§‡ à¦‡à¦¨à¦ªà§à¦Ÿ à¦¬à¦•à§à¦¸à§‡ à¦¬à¦¸à¦¾à¦¨à§‹ à¦à¦¬à¦‚ à¦‡à¦­à§‡à¦¨à§à¦Ÿ à¦Ÿà§à¦°à¦¿à¦—à¦¾à¦° à¦•à¦°à¦¾
            if (sharedNote) {
                noteInput.value = sharedNote; 
                noteInput.focus(); 
                
                // [à¦à¦‡ à¦²à¦¾à¦‡à¦¨à¦Ÿà¦¿ à¦¨à¦¤à§à¦¨] 
                // à¦à¦Ÿà¦¿ à¦¸à¦¿à¦¸à§à¦Ÿà§‡à¦®à¦•à§‡ à¦œà¦¾à¦¨à¦¾à¦¬à§‡ à¦¯à§‡ à¦‡à¦¨à¦ªà§à¦Ÿ à¦¬à¦•à§à¦¸à§‡ à¦•à¦¿à¦›à§ à¦²à§‡à¦–à¦¾ à¦¹à§Ÿà§‡à¦›à§‡, 
                // à¦¯à¦¾à¦¤à§‡ à¦¤à§‹à¦®à¦¾à¦° à¦¥à¦¾à¦®à§à¦¬à¦¨à§‡à¦‡à¦² à¦œà§‡à¦¨à¦¾à¦°à§‡à¦Ÿà¦° à¦•à¦¾à¦œ à¦¶à§à¦°à§ à¦•à¦°à§‡à¥¤
                noteInput.dispatchEvent(new Event('input', { bubbles: true }));
                noteInput.dispatchEvent(new Event('change', { bubbles: true }));

                // à¦¤à§à¦®à¦¿ à¦šà¦¾à¦‡à¦²à§‡ à¦…à¦Ÿà§‹ à¦¸à§‡à¦­ à¦¬à¦¾à¦Ÿà¦¨ à¦•à§à¦²à¦¿à¦• à¦•à¦°à¦¾à¦¤à§‡ à¦ªà¦¾à¦°à§‹ (à¦¯à¦¦à¦¿ à¦¸à¦¬ à¦ à¦¿à¦• à¦¥à¦¾à¦•à§‡)
                //setTimeout(() => document.getElementById('saveBtn').click(), 1000);
            }
        });
    </script>

</body>
</html>